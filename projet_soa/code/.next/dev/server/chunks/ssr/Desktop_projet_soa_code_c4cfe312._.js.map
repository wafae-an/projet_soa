{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdMin/Desktop/projet_soa/code/components/credit-card.tsx"],"sourcesContent":["\"use client\"\n\nimport { useMemo } from \"react\"\n\ninterface CreditCardProps {\n  cardNumber: string\n  cardHolder: string\n  expiryDate: string\n  cvv: string\n  cardType: \"visa\" | \"mastercard\" | \"amex\" | \"discover\" | \"diners\" | \"jcb\"\n  isFlipped: boolean\n}\n\nconst cardTypeConfig = {\n  visa: {\n    gradient: \"from-blue-600 via-blue-500 to-cyan-400\",\n    chipColor: \"from-yellow-400 to-yellow-600\",\n    logo: (\n      <svg className=\"w-14 h-9\" viewBox=\"0 0 48 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <text x=\"4\" y=\"24\" fontSize=\"16\" fontWeight=\"bold\" fill=\"white\" fontFamily=\"Arial\" letterSpacing=\"2\">\n          VISA\n        </text>\n      </svg>\n    ),\n  },\n  mastercard: {\n    gradient: \"from-red-500 via-orange-500 to-yellow-400\",\n    chipColor: \"from-amber-400 to-amber-600\",\n    logo: (\n      <div className=\"flex gap-1.5\">\n        <div className=\"w-6 h-6 rounded-full bg-red-500\" />\n        <div className=\"w-6 h-6 rounded-full bg-orange-500 -ml-2\" />\n      </div>\n    ),\n  },\n  amex: {\n    gradient: \"from-indigo-600 via-indigo-500 to-blue-400\",\n    chipColor: \"from-green-400 to-green-600\",\n    logo: (\n      <svg className=\"w-14 h-9\" viewBox=\"0 0 48 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <text x=\"2\" y=\"24\" fontSize=\"14\" fontWeight=\"bold\" fill=\"white\" fontFamily=\"Arial\" letterSpacing=\"1\">\n          AMEX\n        </text>\n      </svg>\n    ),\n  },\n  discover: {\n    gradient: \"from-orange-600 via-yellow-500 to-orange-400\",\n    chipColor: \"from-red-400 to-red-600\",\n    logo: (\n      <div className=\"flex flex-col items-end\">\n        <div className=\"w-10 h-6 rounded-full border-2 border-white\" />\n      </div>\n    ),\n  },\n  diners: {\n    gradient: \"from-slate-700 via-slate-600 to-blue-600\",\n    chipColor: \"from-slate-300 to-slate-500\",\n    logo: (\n      <div className=\"flex gap-1\">\n        <div className=\"w-5 h-5 rounded border border-white\" />\n        <div className=\"w-5 h-5 rounded border border-white\" />\n      </div>\n    ),\n  },\n  jcb: {\n    gradient: \"from-blue-700 via-indigo-600 to-red-600\",\n    chipColor: \"from-purple-400 to-purple-600\",\n    logo: (\n      <svg className=\"w-12 h-8\" viewBox=\"0 0 48 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <text x=\"6\" y=\"24\" fontSize=\"12\" fontWeight=\"bold\" fill=\"white\" fontFamily=\"Arial\" letterSpacing=\"1\">\n          JCB\n        </text>\n      </svg>\n    ),\n  },\n}\n\nexport default function CreditCard({ cardNumber, cardHolder, expiryDate, cvv, cardType, isFlipped }: CreditCardProps) {\n  const displayCardNumber = useMemo(() => {\n    const cleaned = cardNumber.replace(/\\s/g, \"\")\n    let formatted = \"\"\n    for (let i = 0; i < cleaned.length; i++) {\n      if (i > 0 && i % 4 === 0) formatted += \" \"\n      formatted += cleaned[i]\n    }\n    return formatted.padEnd(19, \"‚Ä¢\")\n  }, [cardNumber])\n\n  const config = cardTypeConfig[cardType] || cardTypeConfig.visa\n\n  return (\n    <div\n      className=\"w-full max-w-sm h-64 transition-transform duration-500 ease-out\"\n      style={{\n        perspective: \"1000px\",\n      }}\n    >\n      <div\n        className=\"relative w-full h-full transition-transform duration-500\"\n        style={{\n          transformStyle: \"preserve-3d\",\n          transform: isFlipped ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\n        }}\n      >\n        {/* Front side */}\n        <div\n          className={`absolute w-full h-full bg-gradient-to-br ${config.gradient} rounded-3xl p-7 shadow-2xl border border-white/20 flex flex-col justify-between`}\n          style={{ backfaceVisibility: \"hidden\" }}\n        >\n          {/* Top section with chip and logo */}\n          <div className=\"flex items-start justify-between\">\n            <div className={`bg-gradient-to-br ${config.chipColor} rounded-xl p-2.5 shadow-lg w-14 h-11`}>\n              <div className=\"w-full h-full rounded-sm bg-gradient-to-br from-yellow-300/20 to-transparent\" />\n            </div>\n            <div className=\"opacity-90\">{config.logo}</div>\n          </div>\n\n          {/* Card number */}\n          <div className=\"space-y-2\">\n            <p className=\"text-xs text-white/70 font-semibold tracking-wider uppercase\">Num√©ro de carte</p>\n            <p className=\"text-2xl font-mono text-white tracking-widest font-bold leading-none drop-shadow-md\">\n              {displayCardNumber}\n            </p>\n          </div>\n\n          {/* Bottom section */}\n          <div className=\"flex items-end justify-between\">\n            <div className=\"flex-1\">\n              <p className=\"text-xs text-white/70 font-semibold mb-1\">Titulaire</p>\n              <p className=\"text-base font-medium text-white uppercase tracking-wider drop-shadow-sm max-w-48 truncate\">\n                {cardHolder || \"NOM COMPLET\"}\n              </p>\n            </div>\n            <div className=\"flex items-end gap-8\">\n              <div className=\"text-right\">\n                <p className=\"text-xs text-white/70 font-semibold mb-1\">Valide jusqu&apos;au</p>\n                <p className=\"text-base font-mono text-white font-bold drop-shadow-sm\">{expiryDate || \"MM/YY\"}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Back side */}\n        <div\n          className={`absolute w-full h-full bg-gradient-to-br ${config.gradient} rounded-3xl p-7 shadow-2xl border border-white/20 flex flex-col justify-center items-end`}\n          style={{\n            backfaceVisibility: \"hidden\",\n            transform: \"rotateY(180deg)\",\n          }}\n        >\n          <div className=\"w-full h-14 bg-black/30 mb-6 rounded-sm\" />\n          <div className=\"w-32 bg-white/95 rounded-lg p-3 shadow-lg\">\n            <p className=\"text-xs text-gray-700 font-semibold mb-2\">Code de s√©curit√©</p>\n            <p className=\"text-lg font-mono text-gray-900 font-bold tracking-wider\">{cvv || \"‚Ä¢‚Ä¢‚Ä¢\"}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdMin/Desktop/projet_soa/code/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,uMAAO,EAAC,IAAA,8KAAI,EAAC;AACtB"}},
    {"offset": {"line": 406, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdMin/Desktop/projet_soa/code/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,+QAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdMin/Desktop/projet_soa/code/components/payment-form.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState } from \"react\"\nimport { Lock, CheckCircle } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\n\ninterface PaymentFormProps {\n  cardData: {\n    cardNumber: string\n    cardHolder: string\n    expiryDate: string\n    cvv: string\n    cardType: \"visa\" | \"mastercard\" | \"amex\" | \"discover\" | \"diners\" | \"jcb\"\n  }\n  setCardData: (data: any) => void\n  isFlipped: boolean\n  setIsFlipped: (flipped: boolean) => void\n}\n\nexport default function PaymentForm({ cardData, setCardData, isFlipped, setIsFlipped }: PaymentFormProps) {\n  const [submitted, setSubmitted] = useState(false)\n\n  const formatCardNumber = (value: string) => {\n    const cleaned = value.replace(/\\s/g, \"\")\n    const maxLength = cardData.cardType === \"amex\" ? 15 : 16\n    return cleaned.slice(0, maxLength)\n  }\n\n  const formatExpiry = (value: string) => {\n    const cleaned = value.replace(/\\D/g, \"\")\n    if (cleaned.length <= 2) return cleaned\n    return cleaned.slice(0, 2) + \"/\" + cleaned.slice(2, 4)\n  }\n\n  const formatCVV = (value: string) => {\n    const maxLength = cardData.cardType === \"amex\" ? 4 : 3\n    return value.replace(/\\D/g, \"\").slice(0, maxLength)\n  }\n\n  const detectCardType = (number: string) => {\n    const cleaned = number.replace(/\\s/g, \"\")\n    if (/^4/.test(cleaned)) return \"visa\"\n    if (/^5[1-5]/.test(cleaned)) return \"mastercard\"\n    if (/^3[47]/.test(cleaned)) return \"amex\"\n    if (/^6(?:011|5)/.test(cleaned)) return \"discover\"\n    if (/^3(?:0[0-5]|[68])/.test(cleaned)) return \"diners\"\n    if (/^(?:2131|1800|35\\d{3})/.test(cleaned)) return \"jcb\"\n    return \"visa\"\n  }\n\n  const handleCardNumberChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const formatted = formatCardNumber(e.target.value)\n    const cardType = detectCardType(formatted)\n    setCardData({\n      ...cardData,\n      cardNumber: formatted,\n      cardType,\n    })\n  }\n\n  const handleExpiryChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const formatted = formatExpiry(e.target.value)\n    setCardData({ ...cardData, expiryDate: formatted })\n  }\n\n  const handleCVVChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const formatted = formatCVV(e.target.value)\n    setCardData({ ...cardData, cvv: formatted })\n  }\n\n  const handleCVVFocus = () => {\n    setIsFlipped(true)\n  }\n\n  const handleCVVBlur = () => {\n    setIsFlipped(false)\n  }\n\n  const expectedCardLength = cardData.cardType === \"amex\" ? 15 : 16\n  const expectedCVVLength = cardData.cardType === \"amex\" ? 4 : 3\n\n  const isFormValid =\n    cardData.cardNumber.length === expectedCardLength &&\n    cardData.cardHolder.length > 0 &&\n    cardData.expiryDate.length === 5 &&\n    cardData.cvv.length === expectedCVVLength\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    if (isFormValid) {\n      setSubmitted(true)\n      setTimeout(() => setSubmitted(false), 3000)\n    }\n  }\n\n  const testCards: Record<string, string> = {\n    visa: \"4532 1234 5678 9010\",\n    mastercard: \"5425 2334 3010 9903\",\n    amex: \"374245455400126\",\n    discover: \"6011 1111 1111 1117\",\n    diners: \"3782 822463 10005\",\n    jcb: \"3566 0020 2920 0505\",\n  }\n\n  return (\n    <div className=\"bg-card rounded-2xl shadow-xl p-8 border border-border/50 backdrop-blur-sm\">\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {/* Card Number */}\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-semibold text-foreground\">Num√©ro de carte</label>\n          <Input\n            type=\"text\"\n            placeholder=\"1234 5678 9012 3456\"\n            value={cardData.cardNumber}\n            onChange={handleCardNumberChange}\n            maxLength={16}\n            className=\"font-mono text-lg tracking-widest bg-input border-border/60 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all rounded-lg\"\n          />\n        </div>\n\n        {/* Cardholder Name */}\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-semibold text-foreground\">Titulaire de la carte</label>\n          <Input\n            type=\"text\"\n            placeholder=\"Jean Dupont\"\n            value={cardData.cardHolder}\n            onChange={(e) => setCardData({ ...cardData, cardHolder: e.target.value.toUpperCase() })}\n            maxLength={26}\n            className=\"bg-input border-border/60 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all rounded-lg\"\n          />\n        </div>\n\n        {/* Expiry and CVV Row */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-semibold text-foreground\">Date d&apos;expiration</label>\n            <Input\n              type=\"text\"\n              placeholder=\"MM/YY\"\n              value={cardData.expiryDate}\n              onChange={handleExpiryChange}\n              maxLength={5}\n              className=\"font-mono text-lg tracking-widest bg-input border-border/60 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all rounded-lg\"\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-semibold text-foreground\">CVV</label>\n            <Input\n              type=\"text\"\n              placeholder=\"123\"\n              value={cardData.cvv}\n              onChange={handleCVVChange}\n              onFocus={handleCVVFocus}\n              onBlur={handleCVVBlur}\n              maxLength={4}\n              className=\"font-mono text-lg tracking-widest bg-input border-border/60 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all rounded-lg\"\n            />\n          </div>\n        </div>\n\n       \n\n      </form>\n\n      {/* Test Cards Info */}\n      <div className=\"mt-6 pt-6 border-t border-border/30\">\n        \n        <p className=\"text-xs text-muted-foreground mb-3\">\n          Acceptons les cartes Visa, Mastercard et autres cartes bancaires marocaines internationales\n        </p>\n        <div className=\"grid grid-cols-2 gap-2\">\n          {Object.entries(testCards).map(([type, number]) => (\n            <div\n              key={type}\n              className=\"text-xs bg-muted/50 rounded p-2 cursor-pointer hover:bg-muted transition-colors\"\n              onClick={() => {\n                setCardData({\n                  ...cardData,\n                  cardNumber: number.replace(/\\s/g, \"\"),\n                  cardType: type,\n                })\n              }}\n            >\n              <p className=\"font-mono text-foreground/80\">{number}</p>\n              <p className=\"text-muted-foreground capitalize\">{type}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 725, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdMin/Desktop/projet_soa/code/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,wMAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,yMAAI,GAAG;IAE9B,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 784, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdMin/Desktop/projet_soa/code/actions/ticketActions.ts"],"sourcesContent":["'use server';\r\n\r\ninterface PurchaseTicketData {\r\n  userId: string;\r\n  ligneId: string;\r\n  routeName: string;\r\n  departureStation: string;\r\n  arrivalStation: string;\r\n  heureDepart?: string;\r\n  heureArrivee?: string;\r\n  dateRecherche: string;\r\n}\r\n\r\ninterface TicketResponse {\r\n  success: boolean;\r\n  ticket?: {\r\n    ticket_id: string;\r\n    user_id: string;\r\n    ligne_id: string;\r\n    ticket_code: string;\r\n    price: string;\r\n    status: string;\r\n    purchase_date: string;\r\n    valid_until: string;\r\n    route_name: string;\r\n    departure_station: string;\r\n    arrival_station: string;\r\n    heure_depart?: string;\r\n    heure_arrivee?: string;\r\n    is_valid: boolean;\r\n  };\r\n  message: string;\r\n}\r\n\r\n/**\r\n * Action serveur pour acheter un ticket (SANS transaction)\r\n */\r\nexport async function purchaseTicketWithTransaction(ticketData: PurchaseTicketData): Promise<{ \r\n  success: boolean; \r\n  message: string; \r\n  ticket?: any;\r\n  ticketCode?: string;\r\n}> {\r\n  try {\r\n    // Validation de l'userId\r\n    if (!ticketData.userId) {\r\n      return {\r\n        success: false,\r\n        message: 'ID utilisateur manquant'\r\n      };\r\n    }\r\n\r\n    // ‚úÖ CR√âATION DU TICKET SEULEMENT\r\n    const ticketPayload = {\r\n      user_id: ticketData.userId,\r\n      ligne_id: ticketData.ligneId,\r\n      route_name: ticketData.routeName,\r\n      departure_station: ticketData.departureStation,\r\n      arrival_station: ticketData.arrivalStation,\r\n      heure_depart: ticketData.heureDepart || '',\r\n      heure_arrivee: ticketData.heureArrivee || '',\r\n      purchase_date: ticketData.dateRecherche, // ‚Üê CORRECTION : Utiliser directement dateRecherche\r\n    };\r\n\r\n    console.log('üì§ Envoi cr√©ation ticket:', ticketPayload);\r\n\r\n    const ticketResponse = await fetch('http://localhost:9002/api/tickets/purchase/', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(ticketPayload)\r\n    });\r\n\r\n    // ‚úÖ Lire la r√©ponse brute pour debug\r\n    const responseText = await ticketResponse.text();\r\n    console.log('üì• R√©ponse brute Django:', responseText);\r\n\r\n    let ticketResult;\r\n    try {\r\n      ticketResult = JSON.parse(responseText);\r\n    } catch (e) {\r\n      console.error('‚ùå Erreur parsing JSON:', e);\r\n      return {\r\n        success: false,\r\n        message: 'R√©ponse invalide du serveur: ' + responseText\r\n      };\r\n    }\r\n\r\n    // ‚úÖ V√©rifier si c'est une erreur Django\r\n    if (!ticketResponse.ok) {\r\n      console.error('‚ùå Erreur Django:', ticketResult);\r\n      \r\n      // Am√©lioration du message d'erreur\r\n      let errorMessage = 'Erreur lors de la cr√©ation du ticket';\r\n      if (ticketResult.purchase_date) {\r\n        errorMessage = ticketResult.purchase_date[0]; // Message de validation Django\r\n      } else if (ticketResult.error) {\r\n        errorMessage = ticketResult.error;\r\n      } else if (ticketResult.detail) {\r\n        errorMessage = ticketResult.detail;\r\n      } else if (ticketResult.message) {\r\n        errorMessage = ticketResult.message;\r\n      }\r\n      \r\n      return {\r\n        success: false,\r\n        message: errorMessage\r\n      };\r\n    }\r\n\r\n    // ‚úÖ SUCC√àS: Ticket cr√©√©\r\n    console.log('‚úÖ Ticket cr√©√© avec succ√®s:', ticketResult);\r\n    \r\n    return {\r\n      success: true,\r\n      message: 'Ticket cr√©√© avec succ√®s',\r\n      ticket: ticketResult.ticket || ticketResult,\r\n      ticketCode: ticketResult.ticket?.ticket_code || ticketResult.ticket_code\r\n    };\r\n\r\n  } catch (error) {\r\n    console.error('‚ùå Erreur achat ticket:', error);\r\n    return {\r\n      success: false,\r\n      message: 'Erreur de connexion au serveur: ' + (error instanceof Error ? error.message : 'Unknown error')\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Action pour valider un ticket\r\n */\r\nexport async function validateTicket(ticketCode: string): Promise<{ \r\n  success: boolean; \r\n  message: string; \r\n  ticket?: any;\r\n}> {\r\n  try {\r\n    const response = await fetch('http://localhost:9002/api/tickets/validate/', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        ticket_code: ticketCode\r\n      })\r\n    });\r\n\r\n    const result = await response.json();\r\n\r\n    return {\r\n      success: response.ok,\r\n      message: result.message || result.detail || 'Validation effectu√©e',\r\n      ticket: result.ticket || result\r\n    };\r\n\r\n  } catch (error) {\r\n    console.error('Erreur validation ticket:', error);\r\n    return {\r\n      success: false,\r\n      message: 'Erreur de connexion au serveur'\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * R√©cup√©rer les tickets d'un utilisateur\r\n */\r\nexport async function getUserTickets(userId: string): Promise<{\r\n  success: boolean;\r\n  message: string;\r\n  tickets?: any[];\r\n}> {\r\n  try {\r\n    if (!userId) {\r\n      return {\r\n        success: false,\r\n        message: 'ID utilisateur manquant',\r\n        tickets: []\r\n      };\r\n    }\r\n\r\n    const response = await fetch(`http://localhost:9002/api/tickets/my_tickets/?user_id=${userId}`);\r\n    \r\n    if (!response.ok) {\r\n      return {\r\n        success: false,\r\n        message: 'Erreur lors de la r√©cup√©ration des tickets',\r\n        tickets: []\r\n      };\r\n    }\r\n\r\n    const result = await response.json();\r\n\r\n    return {\r\n      success: true,\r\n      message: 'Tickets r√©cup√©r√©s avec succ√®s',\r\n      tickets: result.tickets || []\r\n    };\r\n\r\n  } catch (error) {\r\n    console.error('Erreur r√©cup√©ration tickets:', error);\r\n    return {\r\n      success: false,\r\n      message: 'Erreur de connexion au serveur',\r\n      tickets: []\r\n    };\r\n  }\r\n}"],"names":[],"mappings":";;;;;;;IAqCsB,gCAAA,WAAA,GAAA,IAAA,gRAAA,EAAA,8CAAA,qQAAA,EAAA,KAAA,GAAA,2QAAA,EAAA"}},
    {"offset": {"line": 796, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdMin/Desktop/projet_soa/code/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 898, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdMin/Desktop/projet_soa/code/app/passager/trajets/paiement/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport CreditCard from \"@/components/credit-card\"\nimport PaymentForm from \"@/components/payment-form\"\nimport { useRouter } from \"next/navigation\"\nimport { Button } from \"@/components/ui/button\"\nimport { purchaseTicketWithTransaction } from '@/actions/ticketActions'\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Check } from \"lucide-react\"\n\nexport default function PaymentPage() {\n  const router = useRouter()\n  \n  const [cardData, setCardData] = useState({\n    cardNumber: \"\",\n    cardHolder: \"\",\n    expiryDate: \"\",\n    cvv: \"\",\n    cardType: \"visa\" as \"visa\" | \"mastercard\" | \"amex\" | \"discover\" | \"diners\" | \"jcb\",\n  })\n\n  const [isFlipped, setIsFlipped] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [showSuccess, setShowSuccess] = useState(false)\n  \n  // R√©cup√©rer les donn√©es du trajet depuis localStorage\n  const [journeyData, setJourneyData] = useState<any>(null)\n\n  useEffect(() => {\n    // R√©cup√©rer les donn√©es stock√©es par TicketBooking\n    const savedData = localStorage.getItem('mobilePaymentJourneyData')\n    if (savedData) {\n      setJourneyData(JSON.parse(savedData))\n      console.log('üìã Donn√©es r√©cup√©r√©es:', JSON.parse(savedData))\n    } else {\n      setError(\"Aucune donn√©e de trajet trouv√©e. Veuillez revenir √† la s√©lection.\")\n    }\n  }, [])\n\n  const handleConfirmPayment = async () => {\n    // Validation des champs de carte\n    if (!cardData.cardNumber || !cardData.cardHolder || !cardData.expiryDate || !cardData.cvv) {\n      setError(\"Veuillez remplir tous les champs de la carte\")\n      return\n    }\n\n    if (!journeyData) {\n      setError(\"Donn√©es du trajet non disponibles\")\n      return\n    }\n\n    try {\n      setLoading(true)\n      setError(null)\n\n      const userId = localStorage.getItem('userId')\n      \n      if (!userId) {\n        setError('Veuillez vous connecter pour acheter un ticket')\n        return\n      }\n\n      // Pr√©parer les donn√©es pour l'achat du ticket\n      const ticketData = {\n        userId: userId,\n        ligneId: journeyData.selectedLine.id,\n        routeName: `${journeyData.selectedLine.number} - ${journeyData.selectedLine.nom}`,\n        departureStation: journeyData.journeyDetails.departureName,\n        arrivalStation: journeyData.journeyDetails.arrivalName,\n        heureDepart: journeyData.selectedSchedule.heure_depart || '',\n        heureArrivee: journeyData.selectedSchedule.heure_arrivee || '',\n        dateRecherche: journeyData.journeyDetails.date_recherche,\n      }\n\n      console.log('üîç Donn√©es envoy√©es pour paiement mobile:', ticketData)\n\n      // Appeler la fonction d'achat\n      const result = await purchaseTicketWithTransaction(ticketData)\n\n      if (result.success && result.ticket) {\n        console.log('‚úÖ Ticket cr√©√© avec succ√®s via paiement mobile:', result.ticket)\n        \n        // Stocker les donn√©es du ticket\n        const fullTicketData = {\n          ...result.ticket,\n          lineNumber: journeyData.selectedLine.number,\n          lineName: journeyData.selectedLine.nom,\n          journeyDate: journeyData.journeyDetails.date_recherche,\n          dateRecherche: journeyData.journeyDetails.date_recherche,\n          duration: journeyData.selectedSchedule.duree_minutes,\n          payment_method: \"mobile\"\n        }\n        \n        localStorage.setItem('lastTicketData', JSON.stringify(fullTicketData))\n        localStorage.setItem('lastTicketCode', result.ticket.ticket_code)\n\n        // Nettoyer les donn√©es temporaires\n        localStorage.removeItem('mobilePaymentJourneyData')\n\n        setShowSuccess(true)\n        \n        // Rediriger vers le PDF du ticket apr√®s 2 secondes\n        setTimeout(() => {\n          router.push(`/passager/trajets/ticket-pdf?ticket=${result.ticket.ticket_code}`)\n        }, 2000)\n      } else {\n        setError(result.message || 'Erreur lors du paiement mobile')\n      }\n\n    } catch (err) {\n      console.error('Erreur paiement mobile:', err)\n      setError('Erreur de connexion au serveur')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <main className=\"min-h-screen bg-white flex flex-col items-center justify-center p-4 sm:p-6\">\n      <div className=\"w-full max-w-md\">\n        {/* Titre */}\n        <div className=\"mb-8 text-center space-y-3\">\n          <h1 className=\"text-5xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent\">\n            Paiement mobile\n          </h1>\n          <p className=\"text-muted-foreground text-lg\">Saisissez vos informations de paiement</p>\n          \n       \n          \n        </div>\n\n    \n\n        {/* Carte de cr√©dit */}\n        <div className=\"mb-10 flex justify-center perspective\">\n          <CreditCard\n            cardNumber={cardData.cardNumber}\n            cardHolder={cardData.cardHolder}\n            expiryDate={cardData.expiryDate}\n            cvv={cardData.cvv}\n            cardType={cardData.cardType}\n            isFlipped={isFlipped}\n          />\n        </div>\n\n        {/* Formulaire de paiement */}\n        <PaymentForm \n          cardData={cardData} \n          setCardData={setCardData} \n          isFlipped={isFlipped} \n          setIsFlipped={setIsFlipped} \n        />\n\n        {/* Bouton de confirmation */}\n        <div className=\"mt-8 space-y-4\">\n          {error && journeyData && (\n            <div className=\"rounded-lg bg-red-50 p-4 border border-red-200\">\n              <p className=\"text-red-700 font-medium\">{error}</p>\n            </div>\n          )}\n          \n          <Button\n            onClick={handleConfirmPayment}\n            disabled={loading || !cardData.cardNumber || !cardData.cardHolder || !cardData.expiryDate || !cardData.cvv || !journeyData}\n            size=\"lg\"\n            className=\"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-6 text-lg transition-all duration-200\"\n          >\n            {loading ? (\n              <span className=\"flex items-center justify-center\">\n                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Traitement en cours...\n              </span>\n            ) : 'Confirmer le paiement - 5,00 MAD'}\n          </Button>\n          \n          \n        </div>\n\n        {/* Message de succ√®s overlay */}\n        {showSuccess && (\n          <div className=\"fixed inset-0 flex items-center justify-center bg-black/50 p-4 z-50\">\n            <Card className=\"w-full max-w-md border-green-600 bg-white shadow-2xl\">\n              <CardContent className=\"flex flex-col items-center py-12\">\n                <div className=\"mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-green-600\">\n                  <Check className=\"h-8 w-8 text-white\" />\n                </div>\n                <h2 className=\"mb-2 text-center text-2xl font-bold\">Paiement r√©ussi !</h2>\n                <p className=\"text-center text-gray-600\">\n                  Votre ticket a √©t√© achet√© avec succ√®s. Redirection en cours...\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n      </div>\n    </main>\n  )\n}"],"names":[],"mappings":"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"}}]
}